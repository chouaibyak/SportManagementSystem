<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.control.*?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>

<ScrollPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.sport.controller.coach.CoachPerformanceController"
            fitToWidth="true"
            stylesheets="@/css/style.css"
            style="-fx-background-color: linear-gradient(to bottom right, #f0f4f8, #e8eef3);">

    <VBox spacing="25" style="-fx-padding:20; -fx-background-color: transparent;">

        <!-- ===== SECTION MEMBRES ===== -->
        <VBox spacing="15" styleClass="performance-card">
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Label text="ðŸ‘¥" style="-fx-font-size:24;"/>
                <VBox spacing="3">
                    <Label text="Liste des Membres" style="-fx-font-size:20; -fx-font-weight:bold; -fx-text-fill:#2C3E50;"/>
                    <Label text="SÃ©lectionnez un membre pour voir son historique de performances" 
                           style="-fx-font-size:12; -fx-text-fill:#7F8C8D;"/>
                </VBox>
            </HBox>
            
            <Separator style="-fx-background-color:#E0E6ED;"/>
            
            <TableView fx:id="tableMembres" prefHeight="180" 
                      style="-fx-background-color: white; -fx-background-radius: 12; -fx-border-color: #E0E6ED; -fx-border-radius: 12; -fx-border-width: 1;">
                <columns>
                    <TableColumn fx:id="colNom" text="ðŸ‘¤ Nom" prefWidth="250"/>
                    <TableColumn fx:id="colPrenom" text="âœ¨ PrÃ©nom" prefWidth="250"/>
                </columns>
            </TableView>
        </VBox>

        <!-- ===== SECTION PERFORMANCES ===== -->
        <VBox spacing="15" styleClass="performance-card">
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Label text="ðŸ“Š" style="-fx-font-size:24;"/>
                <VBox spacing="3">
                    <Label text="Historique des Performances" style="-fx-font-size:20; -fx-font-weight:bold; -fx-text-fill:#2C3E50;"/>
                    <Label text="Visualisez toutes les performances enregistrÃ©es pour le membre sÃ©lectionnÃ©" 
                           style="-fx-font-size:12; -fx-text-fill:#7F8C8D;"/>
                </VBox>
            </HBox>
            
            <Separator style="-fx-background-color:#E0E6ED;"/>
            
            <TableView fx:id="tablePerformances" prefHeight="220" 
                      style="-fx-background-color: white; -fx-background-radius: 12; -fx-border-color: #E0E6ED; -fx-border-radius: 12; -fx-border-width: 1;">
                <columns>
                    <TableColumn fx:id="colDate" text="ðŸ“… Date" prefWidth="120"/>
                    <TableColumn fx:id="colPoids" text="âš–ï¸ Poids (kg)" prefWidth="120"/>
                    <TableColumn fx:id="colImc" text="ðŸ“ˆ IMC" prefWidth="100"/>
                    <TableColumn fx:id="colTourTaille" text="ðŸ“ Tour Taille (cm)" prefWidth="150"/>
                    <TableColumn fx:id="colForce" text="ðŸ’ª Force" prefWidth="100"/>
                    <TableColumn fx:id="colEndurance" text="ðŸƒ Endurance" prefWidth="120"/>
                </columns>
            </TableView>
        </VBox>

        <!-- ===== SECTION GRAPHIQUES ===== -->
        <VBox spacing="15" styleClass="performance-card">
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Label text="ðŸ“ˆ" style="-fx-font-size:24;"/>
                <VBox spacing="3">
                    <Label text="Graphiques d'Ã‰volution" style="-fx-font-size:20; -fx-font-weight:bold; -fx-text-fill:#2C3E50;"/>
                    <Label text="Suivez l'Ã©volution des performances avec ces graphiques dynamiques" 
                           style="-fx-font-size:12; -fx-text-fill:#7F8C8D;"/>
                </VBox>
            </HBox>
            
            <Separator style="-fx-background-color:#E0E6ED;"/>
            
            <HBox spacing="20" alignment="CENTER">
                <!-- Graphique Poids -->
                <VBox spacing="8" styleClass="chart-box">
                    <HBox spacing="5" alignment="CENTER_LEFT" style="-fx-padding:0 0 5 10;">
                        <Label text="âš–ï¸" style="-fx-font-size:16;"/>
                        <Label text="Ã‰volution du Poids" style="-fx-font-size:14; -fx-font-weight:bold; -fx-text-fill:#667eea;"/>
                    </HBox>
                    <LineChart fx:id="chartPoids" prefWidth="350" prefHeight="250">
                        <xAxis>
                            <CategoryAxis label="Date" side="BOTTOM"/>
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Poids (kg)" side="LEFT"/>
                        </yAxis>
                    </LineChart>
                </VBox>

                <!-- Graphique IMC -->
                <VBox spacing="8" styleClass="chart-box">
                    <HBox spacing="5" alignment="CENTER_LEFT" style="-fx-padding:0 0 5 10;">
                        <Label text="ðŸ“ˆ" style="-fx-font-size:16;"/>
                        <Label text="Ã‰volution de l'IMC" style="-fx-font-size:14; -fx-font-weight:bold; -fx-text-fill:#f093fb;"/>
                    </HBox>
                    <LineChart fx:id="chartImc" prefWidth="350" prefHeight="250">
                        <xAxis>
                            <CategoryAxis label="Date" side="BOTTOM"/>
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="IMC" side="LEFT"/>
                        </yAxis>
                    </LineChart>
                </VBox>

                <!-- Graphique Tour de Taille -->
                <VBox spacing="8" styleClass="chart-box">
                    <HBox spacing="5" alignment="CENTER_LEFT" style="-fx-padding:0 0 5 10;">
                        <Label text="ðŸ“" style="-fx-font-size:16;"/>
                        <Label text="Ã‰volution Tour de Taille" style="-fx-font-size:14; -fx-font-weight:bold; -fx-text-fill:#11998e;"/>
                    </HBox>
                    <LineChart fx:id="chartTourTaille" prefWidth="350" prefHeight="250">
                        <xAxis>
                            <CategoryAxis label="Date" side="BOTTOM"/>
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Tour Taille (cm)" side="LEFT"/>
                        </yAxis>
                    </LineChart>
                </VBox>
            </HBox>
        </VBox>

        <!-- ===== FORMULAIRE AJOUT PERFORMANCE ===== -->
        <VBox spacing="15" styleClass="performance-card" style="-fx-background-color: linear-gradient(to bottom right, #ffffff, #f8f9fa);">
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Label text="âž•" style="-fx-font-size:24;"/>
                <VBox spacing="3">
                    <Label text="Ajouter une Performance" style="-fx-font-size:20; -fx-font-weight:bold; -fx-text-fill:#2C3E50;"/>
                    <Label text="Entrez les nouvelles donnÃ©es de performance pour le membre sÃ©lectionnÃ©" 
                           style="-fx-font-size:12; -fx-text-fill:#7F8C8D;"/>
                </VBox>
            </HBox>
            
            <Separator style="-fx-background-color:#E0E6ED;"/>
            
            <HBox spacing="8" style="-fx-background-color:#E3F2FD; -fx-padding:12; -fx-background-radius:10; -fx-border-color:#2196F3; -fx-border-radius:10; -fx-border-width:1;">
                <Label text="â„¹ï¸" style="-fx-font-size:16;"/>
                <Label text="Assurez-vous d'avoir sÃ©lectionnÃ© un membre avant d'enregistrer les donnÃ©es" 
                       style="-fx-font-size:12; -fx-text-fill:#1565C0; -fx-wrap-text:true;" 
                       wrapText="true" maxWidth="900"/>
            </HBox>
            
            <GridPane hgap="20" vgap="15" style="-fx-padding:10 0 0 0;">
                <columnConstraints>
                    <ColumnConstraints percentWidth="20"/>
                    <ColumnConstraints percentWidth="20"/>
                    <ColumnConstraints percentWidth="20"/>
                    <ColumnConstraints percentWidth="20"/>
                    <ColumnConstraints percentWidth="20"/>
                </columnConstraints>
                
                <VBox spacing="8" GridPane.columnIndex="0" GridPane.rowIndex="0">
                    <HBox spacing="5">
                        <Label text="âš–ï¸" style="-fx-font-size:14;"/>
                        <Label text="Poids (kg)" style="-fx-font-weight:bold; -fx-font-size:13; -fx-text-fill:#2C3E50;"/>
                    </HBox>
                    <TextField fx:id="txtPoids" promptText="Ex: 70.5" styleClass="input-field"/>
                </VBox>
                
                <VBox spacing="8" GridPane.columnIndex="1" GridPane.rowIndex="0">
                    <HBox spacing="5">
                        <Label text="ðŸ“" style="-fx-font-size:14;"/>
                        <Label text="Tour Taille (cm)" style="-fx-font-weight:bold; -fx-font-size:13; -fx-text-fill:#2C3E50;"/>
                    </HBox>
                    <TextField fx:id="txtTourTaille" promptText="Ex: 85" styleClass="input-field"/>
                </VBox>
                
                <VBox spacing="8" GridPane.columnIndex="2" GridPane.rowIndex="0">
                    <HBox spacing="5">
                        <Label text="ðŸ’ª" style="-fx-font-size:14;"/>
                        <Label text="Force" style="-fx-font-weight:bold; -fx-font-size:13; -fx-text-fill:#2C3E50;"/>
                    </HBox>
                    <TextField fx:id="txtForce" promptText="Ex: 8" styleClass="input-field"/>
                </VBox>
                
                <VBox spacing="8" GridPane.columnIndex="3" GridPane.rowIndex="0">
                    <HBox spacing="5">
                        <Label text="ðŸƒ" style="-fx-font-size:14;"/>
                        <Label text="Endurance" style="-fx-font-weight:bold; -fx-font-size:13; -fx-text-fill:#2C3E50;"/>
                    </HBox>
                    <TextField fx:id="txtEndurance" promptText="Ex: 7" styleClass="input-field"/>
                </VBox>
                
                <VBox spacing="8" GridPane.columnIndex="4" GridPane.rowIndex="0">
                    <HBox spacing="5">
                        <Label text="ðŸ“ˆ" style="-fx-font-size:14;"/>
                        <Label text="IMC" style="-fx-font-weight:bold; -fx-font-size:13; -fx-text-fill:#2C3E50;"/>
                    </HBox>
                    <TextField fx:id="txtIMC" promptText="Ex: 24.5" styleClass="input-field"/>
                </VBox>
            </GridPane>
            
            <HBox alignment="CENTER" style="-fx-padding:15 0 0 0;">
                <Button text="ðŸ’¾ Enregistrer la Performance" onAction="#enregistrerPerformance" styleClass="btn-enregistrer"/>
            </HBox>
        </VBox>

    </VBox>
</ScrollPane>